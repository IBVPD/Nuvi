{%extends "NSSentinelBundle::layout.html.twig" %}

{% block body %}
<div class="row">
    <div class="col-sm-9 col-md-9 col-lg-9">
        <div class="widget-box no-border">
            <div class="widget-header widget-header-small header-color-blue">
                <h5>{{'Registered Clients'|trans}}</h5>
                <div class="widget-toolbar">
                    <a class="btn btn-xs btn-success" href="{{path('ApiCreateClient')}}">{{'Create'|trans}}<i class="icon-plus-sign icon-on-right bigger-110"></i></a>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>{{'Name'|trans}}</th>
                            <th>{{'Client Id'|trans}}</th>
                            <th>{{'Client Secret'|trans}}</th>
                            <th>{{'Redirect Uris'|trans}}</th>
                            <th>{{'Allowed Grant Types'|trans}}</th>
                        </tr>
                    </thead>
                    <tbody>
                {% for c in clients %}
                    <tr>
                        <td>{{c.name}}</td>
                        <td>{{c.publicId}}</td>
                        <td>{{c.secret}}</td>
                        <td>{%for uri in c.redirectUris  %}{{uri}}<br />{%endfor%}</td>
                        <td>{%for uri in c.allowedGrantTypes  %}{{uri}}<br />{%endfor%}</td>
                    </tr>
                {%endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-sm-3 col-md-3 col-lg-3">
        <div class="widget-box no-border">
            <div class="widget-header widget-header-small header-color-blue">
                <h5>{{'Api Docs'|trans}}</h5>
            </div>
        </div>
        <div class="table-responsive">
            <table><tr><td><a href="{{path('nelmio_api_doc_index')}}">{{'Docs'|trans}}</a></td></tr></table>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-9 col-md-9 col-lg-9">
        <div class="widget-box no-border">
            <div class="widget-header widget-header-small header-color-blue">
                <h5>{{'Remote Systems'|trans}}</h5>
                <div class="widget-toolbar">
                    <a class="btn btn-xs btn-success" href="{{path('ApiCreateRemote')}}">{{'Create'|trans}}<i class="icon-plus-sign icon-on-right bigger-110"></i></a>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>{{'Client Id'|trans}}</th>
                            <th>{{'Client Secret'|trans}}</th>
                            <th>{{'Token Endpoint'|trans}}</th>
                            <th>{{'Auth Endpoint'|trans}}</th>
                            <th>{{'Auth Status'|trans}}</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for c in remotes %}
                        <tr>
                            <td>{{c.clientId}}</td>
                            <td>{{c.clientSecret}}</td>
                            <td>{{c.tokenEndpoint}}</td>
                            <td>{{c.authEndpoint}}</td>
                            <td>{%if not c.hasAccessToken() or c.IsExpired() %}<a href="{{oauth_authenticate_path(c)}}">{{'Initiate authorization'|trans}}</a>{%else%}{{'Authorization Complete'|trans}}{%endif%}</td>
                        </tr>
                    {%endfor %}
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}