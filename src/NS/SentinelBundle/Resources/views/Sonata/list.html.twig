{% extends 'SonataAdminBundle:CRUD:base_list.html.twig' %}
{% block list_filters %}
    {% if admin.datagrid.filters %}
        <div class="widget-box">
            <div class="widget-header widget-header-small header-color-blue">
                <h5>{{ 'label_filters'|trans({}, 'SonataAdminBundle') }}</h5>
            </div>
            <div class="widget-body">
                <div class="widget-toolbox">
                    <div class="btn-toolbar">
                        <a class="filter_legend btn btn-warning btn-sm {{ admin.datagrid.hasActiveFilters ? 'active' : 'inactive' }}">
                            <i class="icon-plus"></i>Expand Options
                        </a>
                    </div>
                </div>
                <form class="sonata-filter-form form-horizontal {{ admin.isChild and 1 == admin.datagrid.filters|length ? 'hide' : '' }}" action="{{ admin.generateUrl('list') }}" method="GET">
                <div class="widget-main">
                    
                        {{ form_errors(form) }}
                        <fieldset class="filter_legend">
                            <div class="filter_container {{ admin.datagrid.hasActiveFilters ? 'active' : 'inactive' }}">
                                {% for filter in admin.datagrid.filters %}
                                    <div>
                                            <label class="control-label no-padding-right"
                                                for="{{ form.children[filter.formName].children['value'].vars.id }}">
                                                    {{ admin.trans(filter.label, {}, filter.translationDomain) }}
                                            </label>
                                        <div class="input-group">
                                            {{ form_widget(form.children[filter.formName].children['type'], {'attr': {'class': 'span8 sonata-filter-option'}}) }}
                                            {{ form_widget(form.children[filter.formName].children['value'], {'attr': {'class': 'span8'}}) }}
                                        </div>
                                    </div>
                                {% endfor %}

                                <input type="hidden" name="filter[_page]" id="filter__page" value="1" />

                                {% set foo = form.children['_page'].setRendered() %}
                                {{ form_rest(form) }}
                            </div>

                            {% for paramKey, paramValue in admin.persistentParameters %}
                                <input type="hidden" name="{{ paramKey }}" value="{{ paramValue }}" />
                            {% endfor %}
                        </fieldset>
                    
                </div>
                <div class="form-actions align-right">
                    <button type="submit" class="btn btn-primary"><i class="icon-arrow-right icon-on-right bigger-110"></i> {{ 'btn_filter'|trans({}, 'SonataAdminBundle') }}</button>
                    <a class="btn" href="{{ admin.generateUrl('list', {filters: 'reset'}) }}">{{ 'link_reset_filter'|trans({}, 'SonataAdminBundle') }}</a>
                </div>
                </form>
            </div>
        </div>
    {% endif %}
{% endblock %}